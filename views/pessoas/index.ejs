<% include ../partials/header.ejs %>
<div class="container">
    <h2>Pessoas cadastradas</h2>
    <p><a class="btn btn-primary" href="/pessoas/create">Nova pessoa</a></p>
    <table class="table table-striped table-hover table-bordered">
        <tr>
            <th>Nome</th>
            <th>Cargo</th>
            <th>Ações</th>
        </tr>
        <% results.data.map(pessoa =>{ %>
        <tr>
            <td>
                <%= pessoa.nome %>
            </td>
            <td>
                <%= pessoa.cargo %>
            </td>
            <td>
                <div class="btn-group">
                    <a type="button" class="btn btn-default" href="/pessoas/update/<%= pessoa.id %>">Editar</a>
                    <a type="button" class="btn btn-default" href="/pessoas/delete/<%= pessoa.id %>" onclick="return confirm('Deseja realmente deletar o registro?')">Excluir</a>
                </div>
            </td>
        </tr>
        <% }) %>
    </table>
    <nav aria-label="Page navigation example">
        <ul class="pagination">
            <% if(results.pagination.currentPage>0){ %>
            <li class="page-item"><a class="page-link" href="/pessoas?page=<%= parseInt(results.pagination.currentPage)-1 %>">Previous</a></li>
            <% } %>
            <% for(let i =0; i<results.pagination.pages; i++){ %>
            <li class="page-item <% if(i==results.pagination.currentPage){ %>active<% } %>"><a class="page-link" href="/pessoas?page=<%= i %>">
                    <%= (i+1) %></a></li>
            <% } %>
            <% if(results.pagination.currentPage<(results.pagination.pages-1)){ %>
            <li class="page-item"><a class="page-link" href="/pessoas?page=<%= parseInt(results.pagination.currentPage)+1 %>">Next</a></li>
            <% } %>
        </ul>
    </nav>
</div><!-- /.container -->
<% include ../partials/footer.ejs %>